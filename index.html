<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Special Coffee Date üíù</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
   .pickup-line-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: rgba(255, 255, 255, 0.95);
      padding: 25px;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 10px 40px rgba(255, 20, 147, 0.3);
      z-index: 1000;
      border: 3px solid #ff1493;
      opacity: 0;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .pickup-line-text {
      font-family: 'Great Vibes', cursive;
      font-size: 2.5rem;
      color: #ff1493;
      text-align: center;
      margin: 0;
      line-height: 1.4;
      text-shadow: 2px 2px 4px rgba(255, 20, 147, 0.2);
    }

    .pickup-line-container.show {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: all 0.3s ease;
    }

    :root {
      --primary-color: #ff1493;
      --secondary-color: #ff69b4;
      --bg-start: #ff9a9e;
      --bg-mid: #fad0c4;
      --bg-end: #fbc2eb;
      --white: #ffffff;
      --shadow-color: rgba(255, 20, 147, 0.3);
    }

    body, html {
      height: 100%;
      width: 100%;
      font-family: 'Raleway', sans-serif;
      background: linear-gradient(135deg, var(--bg-start), var(--bg-mid), var(--bg-end));
      background-size: 300% 300%;
      animation: gradientBG 15s ease infinite;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      min-height: 100vh;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 30px;
      padding: 45px;
      width: 90%;
      max-width: 520px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      border: 3px solid rgba(255, 255, 255, 0.7);
      transform-style: preserve-3d;
      perspective: 1000px;
      animation: containerFloat 6s ease-in-out infinite;
    }

    @keyframes containerFloat {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      25% { transform: translateY(-10px) rotate(0.5deg); }
      75% { transform: translateY(10px) rotate(-0.5deg); }
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
      animation: borderGlow 3s linear infinite;
    }

    @keyframes borderGlow {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    h2 {
      margin-bottom: 35px;
      color: var(--primary-color);
      font-size: 2.8rem;
      font-family: 'Great Vibes', cursive;
      font-weight: 400;
      text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
      line-height: 1.6;
      animation: titleFloat 4s ease-in-out infinite;
    }

    @keyframes titleFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    input {
      width: 100%;
      padding: 20px;
      margin-bottom: 25px;
      border: 2.5px solid var(--secondary-color);
      border-radius: 18px;
      font-size: 1.2rem;
      background: rgba(255, 255, 255, 0.95);
      font-family: 'Raleway', sans-serif;
      font-weight: 500;
      color: #333;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 30px var(--shadow-color);
      transform: scale(1.02);
    }

    input::placeholder {
      color: #999;
      font-weight: 400;
      font-style: italic;
    }

    button {
      width: 100%;
      padding: 20px;
      margin: 15px 0;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      color: var(--white);
      font-size: 1.3rem;
      font-weight: 600;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      font-family: 'Raleway', sans-serif;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 8px 20px var(--shadow-color);
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: 0.5s;
    }

    button:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 25px var(--shadow-color);
    }

    button:hover::before {
      left: 100%;
    }

    button:active {
      transform: translateY(2px);
      box-shadow: 0 5px 15px var(--shadow-color);
    }

    .step {
      display: none;
      opacity: 0;
      transform: scale(0.9);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .active {
      display: block;
      opacity: 1;
      transform: scale(1);
      animation: stepEnter 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes stepEnter {
      0% {
        opacity: 0;
        transform: scale(0.8) translateY(30px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    .heart {
      position: absolute;
      width: 30px;
      height: 30px;
      background: rgba(255, 20, 147, 0.6);
      transform: rotate(45deg);
      animation: heartFloat 4s ease-in forwards;
      filter: drop-shadow(0 0 10px rgba(255, 20, 147, 0.3));
    }

    .heart::before,
    .heart::after {
      content: '';
      position: absolute;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(255, 20, 147, 0.6);
    }

    .heart::before {
      left: -15px;
    }

    .heart::after {
      top: -15px;
    }

    @keyframes heartFloat {
      0% {
        transform: rotate(45deg) translateY(0) scale(0);
        opacity: 0;
      }
      50% {
        opacity: 0.8;
        transform: rotate(45deg) translateY(-500px) scale(1);
      }
      100% {
        transform: rotate(45deg) translateY(-1000px) scale(0);
        opacity: 0;
      }
    }

    .celebration-heart {
      position: fixed;
      pointer-events: none;
      animation: celebrationHeart 2s ease-out forwards;
    }

    @keyframes celebrationHeart {
      0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
      }
      50% {
        opacity: 1;
        transform: scale(1.5) rotate(180deg);
      }
      100% {
        transform: scale(0) rotate(360deg);
        opacity: 0;
      }
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      pointer-events: none;
      animation: confettiFall 4s ease-out forwards;
    }

    @keyframes confettiFall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    .error-msg {
      color: var(--primary-color);
      font-size: 1rem;
      margin: -20px 0 20px;
      font-weight: 500;
      opacity: 0;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    .error-msg.show {
      opacity: 1;
      transform: translateY(0);
    }

    .flex-buttons {
      display: flex;
      gap: 20px;
      margin: 25px 0;
    }

    .flex-buttons button {
      flex: 1;
      min-width: 0;
    }

    #noBtn {
      transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    /* Mobile container adjustments */
@media (max-width: 480px) {
  .container {
    padding: 25px;
    width: 92%;
    margin: 10px auto;
    max-height: 90vh;
    overflow-y: auto;
  }

  h2 {
    font-size: 2rem;
    margin-bottom: 25px;
  }

  button {
    padding: 14px;
    font-size: 1rem;
  }

  input {
    padding: 12px;
    font-size: 1rem;
    margin-bottom: 20px;
  }

  .flex-buttons {
    gap: 12px;
  }
}

/* Pickup line container mobile fixes */
@media (max-width: 768px) {
  .pickup-line-container {
    position: fixed;
    top: 50%;  /* Changed from bottom positioning */
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 85%;
    max-width: 300px;
    padding: 20px;
  }

  .pickup-line-container.show {
    transform: translate(-50%, -50%) scale(1);
  }

  .pickup-line-text {
    font-size: 1.8rem;
  }
}

/* Additional responsive adjustments */
@media (max-height: 600px) {
  .container {
    margin: 5px auto;
    padding: 20px;
  }

  h2 {
    margin-bottom: 20px;
  }
}
    .audio-overlay {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.9);
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .volume-control {
      position: fixed;
      top: 70px;
      right: 20px;
      width: 100px;
      transform: rotate(-90deg);
      transform-origin: right;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .audio-overlay:hover + .volume-control,
    .volume-control:hover {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  
  <div class="audio-overlay" id="audioControl">üéµ</div>
  <input type="range" min="0" max="100" value="30" class="volume-control" id="volumeControl">
  
  <audio id="bgMusic" loop>
    <source src="Stephen Sanchez Until I Found You Lyrics.mp3" type="audio/mp3">
  </audio>

  <div class="container">
    <div class="step active" id="step0">
      <h2>Ready for Something Special? üíñ</h2>
      <button onclick="startJourney()">Start The Magic ‚ú®</button>
    </div>

    <div class="step" id="step1">
      <h2>Hey Shubhraüíñ</h2>
      <button onclick="nextStep(2)">Click here to know a secret ü§´</button>
    </div>

    <div class="step" id="step2">
      <h2>I Have Something Special... ü§´</h2>
      <button onclick="nextStep(3)">Tell Me! üíù</button>
    </div>

    <div class="step" id="step3">
      <h2>Promise to Keep it Special? ü§ô</h2>
      <button onclick="nextStep(4)">Promise! üåü</button>
    </div>

    <div class="step" id="step4">
      <h2>You're One in a Million! ‚≠ê</h2>
      <button onclick="nextStep(5)">Next ‚ú®</button>
    </div>

    <div class="step" id="step5">
      <h2>Would You Join Me for Coffee? ‚òï</h2>
      <div class="flex-buttons">
        <button onclick="nextStep(6)">Yes! üíñ</button>
        <button id="noBtn" onclick="handleNo()">No üôà</button>
      </div>
    </div>

    <div class="step" id="step6">
      <h2>Pick a Time! ‚ú®</h2>
      <form id="dateForm">
        <input type="datetime-local" id="datetime" required>
        <div id="dateError" class="error-msg"></div>
        <input type="text" id="message" placeholder="Add a sweet message... üíå" required>
        <button type="submit">Let's Do This! üí´</button>
      </form>
    </div>

    <div class="step" id="step7">
      <h2 id="finalMessage"></h2>
      <button onclick="showPickupLine()">Can't Wait! üíù</button>
    </div>
  </div>

  <script>
    let audioStarted = false;
    let noCount = 0;
    const audio = document.getElementById('bgMusic');
    const volumeControl = document.getElementById('volumeControl');
    
    // Array of cute pickup lines
    const pickupLines = [
    "You have no reflection in the water because even something as beautiful as the blue water couldn't mimic the beauty you possess.",
    "I could never understand how people could stare at a painting for hours, but then I saw your face.",
    "They talk about how limitless the sky is, but they haven‚Äôt seen me get lost in thought when I think about you.",
    "Your memory feels like home to me, so whenever my mind wanders, it always finds its way back to you.",
    "If I were a singer, I would write a song about you, but since I‚Äôm not, I dedicate my heart to you.",
    "If loving you would send me to hell, I‚Äôd brag to the devil about how I experienced heaven without going there.",
    "If you asked me how many times you came into my mind, I‚Äôd say once‚Äîbecause you came and never left.",
];


    // Remove loading screen after page loads
    window.onload = function() {
        audio.volume = volumeControl.value / 100;
        setTimeout(() => {
            const loading = document.getElementById('loading');
            loading.style.opacity = '0';
            setTimeout(() => {
                loading.style.display = 'none';
            }, 500);
        }, 1500);
    };

    // Audio controls
    document.getElementById("audioControl").addEventListener("click", function() {
        if (audio.paused) {
            audio.play()
                .then(() => {
                    audioStarted = true;
                    this.textContent = "üîä";
                })
                .catch(err => {
                    console.log("Audio playback failed:", err);
                });
        } else {
            audio.pause();
            this.textContent = "üéµ";
        }
    });

    volumeControl.addEventListener("input", function() {
        audio.volume = this.value / 100;
    });

    // Heart animation functions
    function createHeart() {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.animationDuration = (3 + Math.random() * 2) + 's';
        document.getElementById('hearts').appendChild(heart);
        
        setTimeout(() => {
            heart.remove();
        }, 4000);
    }

    function startHeartAnimation() {
        setInterval(createHeart, 300);
    }

    // Confetti animation
    function createConfetti() {
        const colors = ['#ff1493', '#ff69b4', '#ffc0cb', '#ffffff'];
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        document.body.appendChild(confetti);
        
        setTimeout(() => {
            confetti.remove();
        }, 4000);
    }

    // Navigation functions
    function startJourney() {
        try {
            if (!audioStarted) {
                audio.play()
                    .then(() => {
                        audioStarted = true;
                        document.getElementById("audioControl").textContent = "üîä";
                    })
                    .catch(err => {
                        console.log("Audio playback failed:", err);
                    });
            }
            nextStep(1);
        } catch (err) {
            console.log("Journey start failed:", err);
            nextStep(1); // Continue even if audio fails
        }
    }

    function nextStep(step) {
        const currentStep = document.querySelector('.step.active');
        const nextStep = document.getElementById('step' + step);
        
        if (currentStep && nextStep) {
            currentStep.classList.remove('active');
            nextStep.classList.add('active');
            
            if (step === 6) {
                setMinDateTime();
            }
        }
    }

    // No button interaction with improved randomization
    function handleNo() {
        noCount++;
        const noBtn = document.getElementById('noBtn');
        
        if (noCount > 1) {
            const randomX = (Math.random() * 200 - 100) * (noCount / 2);
            const randomY = (Math.random() * 200 - 100) * (noCount / 2);
            noBtn.style.transform = `translate(${randomX}px, ${randomY}px)`;
            noBtn.style.transition = 'transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
        }
        
        setTimeout(() => {
            noBtn.style.transform = 'translate(0, 0)';
        }, 2000);
    }

    // Date-time validation and formatting
    function setMinDateTime() {
        const now = new Date();
        now.setMinutes(now.getMinutes() + 30); // Minimum 30 minutes from now
        
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        
        const minDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;
        const dateInput = document.getElementById('datetime');
        dateInput.min = minDateTime;
        
        // Set max date to 3 months from now
        const maxDate = new Date();
        maxDate.setMonth(maxDate.getMonth() + 3);
        const maxDateTime = maxDate.toISOString().slice(0, 16);
        dateInput.max = maxDateTime;
    }

    // Form submission with enhanced validation
    document.getElementById('dateForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const dateTime = new Date(document.getElementById('datetime').value);
        const message = document.getElementById('message').value.trim();
        const now = new Date();
        const errorMsg = document.getElementById('dateError');
        
        if (dateTime < now) {
            errorMsg.textContent = "Please choose a future date and time! ‚è∞";
            errorMsg.classList.add('show');
            return;
        }

        if (message.length < 3) {
            errorMsg.textContent = "Please add a longer message! üíå";
            errorMsg.classList.add('show');
            return;
        }
        
        // Format the date for display
        const options = { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric',
            hour: '2-digit', 
            minute: '2-digit'
        };
        
        const formattedDate = dateTime.toLocaleDateString('en-US', options);
        
        // Set final message with enhanced formatting
        document.getElementById('finalMessage').innerHTML = `
            <span style="font-size: 3rem">It's a Date! üíù</span><br>
            <span style="font-size: 1.8rem">${formattedDate}</span><br><br>
            <span style="font-style: italic; color: #ff1493">"${message}"</span>
        `;
        
        // Start celebration animations
        for (let i = 0; i < 50; i++) {
            setTimeout(createConfetti, i * 100);
        }
        startHeartAnimation();
        
        nextStep(7);
    });

    // Enhanced pickup line generator with animation
    function showPickupLine() {
    // Remove existing pickup line if present
    const existingLine = document.querySelector('.pickup-line-container');
    if (existingLine) {
        existingLine.remove();
    }

    // Get a random pickup line
    const randomLine = pickupLines[Math.floor(Math.random() * pickupLines.length)];

    // Create container
    const container = document.createElement('div');
    container.className = 'pickup-line-container';

    // Create text element
    const lineElement = document.createElement('p');
    lineElement.className = 'pickup-line-text';
    lineElement.textContent = randomLine;

    // Add text to container
    container.appendChild(lineElement);

    // Add container to body
    document.body.appendChild(container);

    // Trigger animation
    setTimeout(() => {
        container.classList.add('show');
    }, 100);

    // Create extra celebration hearts
    for (let i = 0; i < 10; i++) {
        setTimeout(createHeart, i * 200);
    }
}
</script>
