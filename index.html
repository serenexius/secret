<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Special Coffee Date ğŸ’</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="script.js" defer></script>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div class="hearts" id="hearts"></div>
  
  <div class="audio-overlay" id="audioControl">ğŸµ</div>
  <input type="range" min="0" max="100" value="30" class="volume-control" id="volumeControl">
  
  <audio id="bgMusic" loop>
    <source src="Stephen Sanchez Until I Found You Lyrics.mp3" type="audio/mp3">
  </audio>

  <div class="container">
    <div class="step active" id="step0">
      <h2>Ready for Something Special? ğŸ’–</h2>
      <button onclick="startJourney()">Start The Magic âœ¨</button>
    </div>

    <div class="step" id="step1">
      <h2>Hey ShubhrağŸ’–</h2>
      <button onclick="nextStep(2)">Click here to know a secret ğŸ¤«</button>
    </div>

    <div class="step" id="step2">
      <h2>I Have Something Special... ğŸ¤«</h2>
      <button onclick="nextStep(3)">Tell Me! ğŸ’</button>
    </div>

    <div class="step" id="step3">
      <h2>Promise to Keep it Special? ğŸ¤™</h2>
      <button onclick="nextStep(4)">Promise! ğŸŒŸ</button>
    </div>

    <div class="step" id="step4">
      <h2>You're One in a Million! â­</h2>
      <button onclick="nextStep(5)">Next âœ¨</button>
    </div>

    <div class="step" id="step5">
      <h2>I know the perfect spot for coffee â˜• Wanna join?</h2>
      <div class="flex-buttons">
        <button onclick="nextStep(6)">Yes! ğŸ’–</button>
        <button id="noBtn" onclick="handleNo()">No ğŸ™ˆ</button>
      </div>
    </div>

    <div class="step" id="step6">
      <h2>Pick a Time! âœ¨</h2>
      <form id="dateForm">
        <input type="datetime-local" id="datetime" required>
        <div id="dateError" class="error-msg"></div>
        <input type="text" id="message" placeholder="Add a sweet message... ğŸ’Œ" required>
        <button type="submit">Let's Do This! ğŸ’«</button>
      </form>
    </div>
    
    <div class="step" id="step7">
      <h2 id="finalMessage"></h2>
      <button onclick="showPickupLine()">Can't Wait! ğŸ’</button>
    </div>
    
    <script>
      // Replace this URL with your Google Apps Script Web App URL after deployment
      const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwnKMU-dWtbfqo16WyCS-AjfwfbtAOrWwUtKmMcZMDquQU2sYZNF9im_xL57b_j8r0d/exec';
    
      const usedDates = new Set(); // To track submitted datetime values.
    
      document.getElementById('dateForm').addEventListener('submit', function (e) {
        e.preventDefault();
    
        const datetime = document.getElementById('datetime').value;
        const message = document.getElementById('message').value;
    
        // Check for duplicate datetime entries
        if (usedDates.has(datetime)) {
          alert('This datetime has already been submitted. Please pick a new time.');
          return;
        }
    
        usedDates.add(datetime); // Mark the datetime as used
    
        const formData = {
          name: message,
          date: datetime,
        };
    
        fetch(SCRIPT_URL, {
          method: 'POST',
          body: JSON.stringify(formData),
          mode: 'no-cors',
        })
          .then(() => {
            console.log('Form submitted successfully!');
            document.getElementById('dateForm').reset(); // Clear the form inputs
          })
          .catch((error) => {
            console.error('Error submitting form:', error);
          });
      });
    </script>
    
    


</body>
</html>